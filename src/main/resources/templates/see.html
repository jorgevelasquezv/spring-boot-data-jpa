<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://thymeleaf.org/extras/spring-security" lang="en">
<head th:replace="~{layout/layout ::head}"></head>
<body>

<header th:replace="~{layout/layout ::header}"></header>

<div class="container py-4">

    <div class="card bg-dark text-white">
        <div class="card-header">
            <h2 class="text-secondary border-bottom border-success" th:text="${titulo}"></h2>
        </div>
        <div class="card-body">

            <h3 class="card-title">
                <a th:href="@{'/invoice/form/' + ${client.id}}"
                   sec:authorize="hasRole('ROLE_ADMIN')"
                   class="btn btn-outline-primary btn-xs" th:text="#{text.see.crear_factura}">Crear Factura</a>
            </h3>

            <img th:if="${#strings.length(client.photo) > 0}" class="img-thumbnail rounded float-start"
                 style="max-width: 25%;"
                 th:src="@{'/uploads/' + ${client.photo}}" th:alt="${client.photo}"/>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-dark text-white" th:text="${client.name}"></li>
                <li class="list-group-item bg-dark text-white" th:text="${client.lastname}"></li>
                <li class="list-group-item bg-dark text-white" th:text="${client.email}"></li>
                <li class="list-group-item bg-dark text-white" th:text="${client.createAt}"></li>
            </ul>
            <div class="alert alert-info my-4" th:if="${#lists.isEmpty(client.invoices)}"
                 th:text="#{text.see.no_factura} + ${client.name} + ' '+ ${client.lastname} "></div>
            <table class="table table-bordered table-striped my-4 text-white"
                   th:if="${!#lists.isEmpty(client.invoices)}">
                <thead>
                <tr>
                    <th th:text="#{text.see.folio}">Folio</th>
                    <th th:text="#{text.see.descripcion}">Descripción</th>
                    <th th:text="#{text.see.fecha}">Fecha</th>
                    <th th:text="#{text.see.total}">Total</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" th:text="#{text.see.ver}">Ver</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" th:text="#{text.see.eliminar}">Eliminar</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="invoice: ${client.invoices}" class="text-white">
                    <td th:text="${invoice.id}" class="text-white"></td>
                    <td th:text="${invoice.description}" class="text-white"></td>
                    <td th:text="${invoice.createAt}" class="text-white"></td>
                    <td th:text="${invoice.total}" class="text-white"></td>
                    <td class="text-white" sec:authorize="hasRole('ROLE_ADMIN')">
                        <a th:href="@{'/invoice/see/' + ${invoice.id}}" class="btn btn-outline-primary btn-sm" th:text="#{text.see.detalle}">Detalle</a>
                    </td>
                    <td class="text-white" sec:authorize="hasRole('ROLE_ADMIN')">
                        <a th:href="@{'/invoice/delete/' + ${invoice.id}}" class="btn btn-outline-danger btn-sm"
                        onclick="return confirm('¿Esta seguro que desa eliminar la factura?');" th:text="#{text.see.eliminar}">Eliminar</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<footer th:replace="~{layout/layout ::footer}"></footer>
</body>
</html>